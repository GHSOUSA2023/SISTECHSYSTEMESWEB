(()=>{var e={};e.id=352,e.ids=[352],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},2412:e=>{"use strict";e.exports=require("assert")},9428:e=>{"use strict";e.exports=require("buffer")},5511:e=>{"use strict";e.exports=require("crypto")},4985:e=>{"use strict";e.exports=require("dns")},4735:e=>{"use strict";e.exports=require("events")},9021:e=>{"use strict";e.exports=require("fs")},1630:e=>{"use strict";e.exports=require("http")},3496:e=>{"use strict";e.exports=require("http2")},1645:e=>{"use strict";e.exports=require("net")},1820:e=>{"use strict";e.exports=require("os")},3873:e=>{"use strict";e.exports=require("path")},9771:e=>{"use strict";e.exports=require("process")},7910:e=>{"use strict";e.exports=require("stream")},4631:e=>{"use strict";e.exports=require("tls")},9551:e=>{"use strict";e.exports=require("url")},8354:e=>{"use strict";e.exports=require("util")},4075:e=>{"use strict";e.exports=require("zlib")},316:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>x,routeModule:()=>p,serverHooks:()=>h,workAsyncStorage:()=>d,workUnitAsyncStorage:()=>l});var s={};r.r(s),r.d(s,{GET:()=>n});var a=r(2706),i=r(8203),u=r(5994),o=r(9187),c=r(8447);async function n(e){try{let{searchParams:t}=new URL(e.url),r=t.get("q"),s=t.get("status");if(s){let e=await c.A.getItemsByStatus(s);return o.NextResponse.json(e)}if(r){let e=await c.A.searchItems(r);return o.NextResponse.json(e)}return o.NextResponse.json({error:"Search parameters required"},{status:400})}catch(e){return o.NextResponse.json({error:"Search failed"},{status:500})}}let p=new a.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/packages/search/route",pathname:"/api/packages/search",filename:"route",bundlePath:"app/api/packages/search/route"},resolvedPagePath:"D:\\Project_Creccal\\prj-01\\src\\app\\api\\packages\\search\\route.js",nextConfigOutput:"",userland:s}),{workAsyncStorage:d,workUnitAsyncStorage:l,serverHooks:h}=p;function x(){return(0,u.patchFetch)({workAsyncStorage:d,workUnitAsyncStorage:l})}},6487:()=>{},8335:()=>{},8447:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var s=r(2618),a=r(1982),i=r(3710),u=r(3601);let o={apiKey:"AIzaSyArKn-vO5PGz6C9lv2RvKGskkE9yQWJgGM",authDomain:"creccal-control.firebaseapp.com",databaseURL:process.env.NEXT_PUBLIC_FIREBASE_DATABASE_URL,projectId:"creccal-control",storageBucket:"creccal-control.firebasestorage.app",messagingSenderId:"601224722090",appId:"1:601224722090:web:18cc743e48521aaa1d02d3"},c=(0,s.Wp)(o),n=(0,i.C3)(c);(0,a.aU)(c),(0,u.xI)(c);class p{constructor(e){this.path=e,this.dbRef=(0,i.KR)(n,e)}async getAll(){return Object.values((await (0,i.Jt)(this.dbRef)).val()||{})}async getById(e){let t=(0,i.KR)(n,`${this.path}/${e}`);return(await (0,i.Jt)(t)).val()}async create(e){let t=(0,i.VC)(this.dbRef),r={...e,id:t.key};return await (0,i.hZ)(t,r),r}async update(e,t){let r=(0,i.KR)(n,`${this.path}/${e}`);return await (0,i.yo)(r,t),{...t,id:e}}async delete(e){let t=(0,i.KR)(n,`${this.path}/${e}`);await (0,i.hZ)(t,null)}async getFiltered(e,t,r){let s=(0,i.P)(this.dbRef,(0,i.kT)(e),(0,i.iz)(r));return Object.values((await (0,i.Jt)(s)).val()||{})}}class d extends p{constructor(){super("packages")}async getAllActiveItems(){return(await this.getAll()).filter(e=>"deleted"!==e.status)}async getItemById(e){return await this.getById(e)||null}async createItem(e){let t={...e,status:"Received",createdAt:Date.now(),metadata:{createdBy:"system",version:"1.0"}};return this.create(t)}async updateItem(e,t){let r=await this.getById(e);if(!r)throw Error("Item not found");if(r.isLocked)throw Error("Item is locked for editing");let s={...r,...t,metadata:{...r.metadata,lastModified:Date.now()}};return this.update(e,s)}async softDelete(e){let t=await this.getById(e);if(!t)throw Error("Item not found");return this.update(e,{...t,status:"deleted",deletedAt:Date.now()})}async getItemsByStatus(e){return this.getFiltered("status","==",e)}async searchItems(e){return(await this.getAll()).filter(t=>t.title?.toLowerCase().includes(e.toLowerCase())||t.description?.toLowerCase().includes(e.toLowerCase()))}}let l=new d}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,452,382],()=>r(316));module.exports=s})();