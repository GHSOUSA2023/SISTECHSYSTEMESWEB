(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[311],{2541:(e,t,a)=>{Promise.resolve().then(a.bind(a,682))},682:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var l=a(5155),s=a(2115);function r(e){let{aptemails:t,onEdit:a}=e;return(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"min-w-full bg-white border border-gray-300",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"px-6 py-3 border-b text-left",children:"Apartment"}),(0,l.jsx)("th",{className:"px-6 py-3 border-b text-left",children:"Email"}),(0,l.jsx)("th",{className:"px-6 py-3 border-b text-left",children:"Actions"})]})}),(0,l.jsx)("tbody",{children:t.map(e=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"px-6 py-4 border-b",children:"string"==typeof e.apt?e.apt:"❌"}),(0,l.jsx)("td",{className:"px-6 py-4 border-b",children:"string"==typeof e.email?e.email:"❌ Invalid email"}),(0,l.jsx)("td",{className:"px-6 py-4 border-b",children:(0,l.jsx)("button",{onClick:()=>a(e),className:"text-blue-500 hover:text-blue-700 mr-4",children:"Edit"})})]},e.apt))})]})})}function i(){let[e,t]=(0,s.useState)([]),[a,i]=(0,s.useState)("APT"),[n,d]=(0,s.useState)(""),[c,o]=(0,s.useState)(null),[p,m]=(0,s.useState)(""),[h,x]=(0,s.useState)(!1);(0,s.useEffect)(()=>{u()},[]);let u=async()=>{try{let e=await fetch("/api/aptemails"),a=await e.json();t(a)}catch(e){console.error("Failed to fetch apt emails:",e)}},b=async()=>{if(null==c?void 0:c.apt)try{await fetch("/api/aptemails/".concat(c.apt),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:p})});let a=e.map(e=>e.apt===c.apt?{...e,email:p}:e);t(a),x(!1)}catch(e){console.error("Erreur lors de la mise \xe0 jour :",e)}};return(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,l.jsx)("h1",{className:"text-2xl font-bold",children:"Apartment Emails"})}),(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Sort by:"}),(0,l.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,l.jsx)("button",{onClick:()=>i("APT"),className:"px-4 py-2 rounded transition-opacity duration-300 ".concat("APT"===a?"bg-blue-600 text-white opacity-100":"bg-blue-500 text-white hover:bg-blue-600 opacity-50"),children:"APT"}),(0,l.jsx)("label",{htmlFor:"searchInput",className:"ml-4 text-gray-700 font-medium",children:"Search apt email:"}),(0,l.jsx)("input",{id:"searchInput",type:"text",placeholder:"Search apt email",value:n,onChange:e=>d(e.target.value),className:"px-4 py-2 border rounded w-80"}),(0,l.jsx)("button",{onClick:()=>d(""),className:"ml-2 px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600",children:"Clear"})]})]}),(0,l.jsx)("div",{children:(0,l.jsx)(r,{aptemails:(()=>{let t=[...e];if(""!==n.trim()){let e=n.toLowerCase();t=t.filter(t=>{var a,l;let s=null!==(l=null===(a=t.apt)||void 0===a?void 0:a.toString().toLowerCase())&&void 0!==l?l:"",r="string"==typeof t.email?t.email.toLowerCase():"";return s.includes(e)||r.includes(e)})}return"APT"===a&&t.sort((e,t)=>{let a=isNaN(e.apt)?e.apt:parseInt(e.apt,10),l=isNaN(t.apt)?t.apt:parseInt(t.apt,10);return a>l?1:a<l?-1:0}),t})(),onEdit:e=>{var t;o(e),m(null!==(t=e.email)&&void 0!==t?t:""),x(!0)}})}),h&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,l.jsxs)("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-md",children:[(0,l.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Modifier Email"}),(0,l.jsxs)("p",{className:"mb-2",children:[(0,l.jsx)("strong",{children:"APT :"})," ",null==c?void 0:c.apt]}),(0,l.jsx)("input",{type:"email",value:p,onChange:e=>m(e.target.value),className:"w-full px-4 py-2 border rounded mb-4",placeholder:"Nouveau email"}),(0,l.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,l.jsx)("button",{onClick:()=>x(!1),className:"px-4 py-2 bg-gray-500 text-white rounded",children:"Annuler"}),(0,l.jsx)("button",{onClick:b,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Enregistrer"})]})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,517,358],()=>t(2541)),_N_E=e.O()}]);