(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[20],{5951:(e,a,t)=>{Promise.resolve().then(t.bind(t,2863))},6046:(e,a,t)=>{"use strict";var s=t(6658);t.o(s,"useRouter")&&t.d(a,{useRouter:function(){return s.useRouter}})},2863:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>c});var s=t(5155),l=t(2115),r=t(6046);function n(e){let{initialData:a,onSubmit:t,isNew:r}=e,[n,c]=(0,l.useState)({nom:"",apt:"",enterprise:"",date:"",date_delivery:"",qtd:1,status:"Received"});return(0,l.useEffect)(()=>{a&&c(a)},[a]),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t(n)},className:"max-w-lg",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block mb-2",children:"Name:"}),(0,s.jsx)("input",{type:"text",value:n.nom,onChange:e=>c({...n,nom:e.target.value}),className:"w-full p-2 border rounded",required:!0})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block mb-2",children:"Apartment:"}),(0,s.jsx)("input",{type:"text",value:n.apt,onChange:e=>c({...n,apt:e.target.value}),className:"w-full p-2 border rounded",required:!0})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block mb-2",children:"Enterprise:"}),(0,s.jsx)("input",{type:"text",value:n.enterprise,onChange:e=>c({...n,enterprise:e.target.value}),className:"w-full p-2 border rounded"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block mb-2",children:"Date:"}),(0,s.jsx)("input",{type:"date",value:n.date,onChange:e=>c({...n,date:e.target.value}),className:"w-full p-2 border rounded",required:!0})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block mb-2",children:"Delivery Date:"}),(0,s.jsx)("input",{type:"date",value:n.date_delivery,onChange:e=>c({...n,date_delivery:e.target.value}),className:"w-full p-2 border rounded"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block mb-2",children:"Quantity:"}),(0,s.jsx)("input",{type:"number",value:n.qtd,onChange:e=>c({...n,qtd:parseInt(e.target.value)}),className:"w-full p-2 border rounded",min:"1",required:!0})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block mb-2",children:"Status:"}),(0,s.jsxs)("select",{value:n.status,onChange:e=>c({...n,status:e.target.value}),className:"w-full p-2 border rounded",required:!0,children:[(0,s.jsx)("option",{value:"Received",children:"Received"}),(0,s.jsx)("option",{value:"Delivered",children:"Delivered"})]})]}),(0,s.jsxs)("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:[r?"Create":"Update"," Package"]})]})}function c(e){let{params:a}=e,[t,c]=(0,l.useState)(null),[i,d]=(0,l.useState)(!0),u=(0,r.useRouter)(),{id:o}=l.use(a),m="new"===o;(0,l.useEffect)(()=>{!async function(){!m&&o&&await p(o),d(!1)}()},[o,m]);let p=async e=>{try{let a=await fetch("/api/packages/".concat(e));if(!a.ok)throw Error("Failed to fetch");let t=await a.json();c(t)}catch(e){console.error("Error fetching package:",e)}},b=async e=>{try{let a=m?"/api/packages":"/api/packages/".concat(o),t=m?"POST":"PUT";if(!(await fetch(a,{method:t,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Failed to save");u.push("/packages")}catch(e){console.error("Error saving package:",e)}};return i?(0,s.jsx)("div",{children:"Loading..."}):o?(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-6",children:m?"Create Package":"Edit Package"}),(0,s.jsx)(n,{initialData:t,onSubmit:b,isNew:m})]}):null}}},e=>{var a=a=>e(e.s=a);e.O(0,[441,517,358],()=>a(5951)),_N_E=e.O()}]);